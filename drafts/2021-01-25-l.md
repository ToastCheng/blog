linux as a multithread server
```
process   ------syscall---->   [        ]
                               [ kernel ]
IO device ------interrupt----> [        ]
                               [        ]
Timer     ------interrupt----> [        ]
```
Timer: 特別的維繫作業系統運作
快的耗電
慢的省電

interrupt/exceptions
(irqs) interrupt request lines
(pic) programmable interrupt controllers
(idt) interrupt descriptor table
interrupt 
softIRQ, tasklet
workqueue

apic 多核

assigning vector to irq
vector: index 0-255 into idt

index = irq# + 32
- 0-32 non-maskable intr & exceptions
- 128: syscall
- 251-255 ipi 

idt: 
其他架構: 存handler位置
arm架構: 直接存指令

nested intr: stack...?? yes

interrupt handler
- critical: top (intr disable)
    - ackowledge intr
- non-c: top (intr enabled)
    - read key scan mode
- non-c deferrable: bottom-half, soft irq
    - cp keyboard buffer to terminal

`cat /proc/ioports`
`cat /proc/interrupts`
`cat /proc/stat`
